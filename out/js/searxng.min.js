/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=((m,r)=>{m.Element&&(i=>{i.matches=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.msMatchesSelector||function(a){const n=(this.parentNode||this.document).querySelectorAll(a);let t=-1;for(;n[++t]&&n[t]!==this;);return!!n[t]}})(Element.prototype);function l(i,a,n){try{i.call(a,n)}catch(t){console.log(t)}}const p=window.searxng||{};p.on=(i,a,n,t)=>{t=t||!1,typeof i!="string"?i.addEventListener(a,n,t):r.addEventListener(a,o=>{let s=o.target||o.srcElement,f=!1;for(;s!=null&&s.matches&&s!==r&&(f=s.matches(i),!f);)s=s.parentElement;f&&l(n,s,o)},t)},p.ready=i=>{document.readyState!=="loading"?i.call(m):m.addEventListener("DOMContentLoaded",i.bind(m))},p.http=(i,a,n=null)=>new Promise((t,o)=>{try{const s=new XMLHttpRequest;s.open(i,a,!0),s.timeout=2e4,s.onload=()=>{s.status===200?t(s.response,s.responseType):o(Error(s.statusText))},s.onerror=()=>{o(Error("Network Error"))},s.onabort=()=>{o(Error("Transaction is aborted"))},s.ontimeout=()=>{o(Error("Timeout"))},n?s.send(n):s.send()}catch(s){o(s)}}),p.loadStyle=i=>{const a=`${p.settings.theme_static_path}/${i}`,n=`style_${i.replace(".","_")}`;let t=r.getElementById(n);t===null&&(t=r.createElement("link"),t.setAttribute("id",n),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",a),r.body.appendChild(t))},p.loadScript=(i,a)=>{const n=`${p.settings.theme_static_path}/${i}`,t=`script_${i.replace(".","_")}`;let o=r.getElementById(t);if(o===null)o=r.createElement("script"),o.setAttribute("id",t),o.setAttribute("src",n),o.onload=a,o.onerror=()=>{o.setAttribute("error","1")},r.body.appendChild(o);else if(o.hasAttribute("error"))console.log(`callback not executed : script '${n}' not loaded.`);else try{a.apply(o,[])}catch(s){console.log(s)}},p.insertBefore=(i,a)=>{a.parentNode.insertBefore(i,a)},p.insertAfter=(i,a)=>{a.parentNode.insertAfter(i,a.nextSibling)},p.on(".close","click",function(){this.parentNode.classList.add("invisible")});function g(){for(const i of r.getElementsByTagName("body")[0].classList.values())if(i.endsWith("_endpoint"))return i.split("_")[0];return""}return p.endpoint=g(),p})(window,document);searxng.ready(()=>{if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}const m=document,r=m.getElementById("results").classList.contains("only_template_images");function l(){const i=m.createElement("div");return i.classList.add("loader"),i}function p(i,a){i.textContent="",a.forEach(n=>i.appendChild(n))}function g(i){const a=m.querySelector("#pagination form.next_page");if(!a)return;p(m.querySelector("#pagination"),[l()]);const n=new FormData(a);searxng.http("POST",m.querySelector("#search").getAttribute("action"),n).then(t=>{const o=new DOMParser().parseFromString(t,"text/html"),s=o.querySelectorAll("#urls article"),f=o.querySelector("#pagination");m.querySelector("#pagination").remove(),s.length>0&&!r&&m.querySelector("#urls").appendChild(m.createElement("hr")),s.forEach(h=>{m.querySelector("#urls").appendChild(h)}),f&&(m.querySelector("#results").appendChild(f),i())}).catch(t=>{console.log(t);const o=m.createElement("div");o.textContent=searxng.settings.translations.error_loading_next_page,o.classList.add("dialog-error"),o.setAttribute("role","alert"),p(m.querySelector("#pagination"),[o])})}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const i={rootMargin:"20rem"},a="article.result:last-child",n=new IntersectionObserver(t=>{const o=t[0];o.isIntersecting&&(n.unobserve(o.target),g(()=>n.observe(m.querySelector(a),i)))});n.observe(m.querySelector(a),i)}});searxng.ready(()=>{function m(e){for(;e!==void 0;){if(e.classList.contains("detail"))return!0;if(e.classList.contains("result"))return!1;e=e.parentNode}return!1}function r(e){for(;e!==void 0;){if(e.classList.contains("result"))return e;e=e.parentNode}}function l(e){return e==null?void 0:e.classList.contains("result-images")}searxng.on(".result","click",function(e){if(!m(e.target)){a(this)(!0,!0);const d=r(e.target);l(d)&&(e.preventDefault(),searxng.selectImage(d))}}),searxng.on(".result a","focus",e=>{if(!m(e.target)){const d=r(e.target);d&&d.getAttribute("data-vim-selected")===null&&a(d)(!0),l(d)&&searxng.selectImage(d)}},!0);const p={Escape:{key:"ESC",fun:t,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:_,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:T,des:"toggle help window",cat:"Other"},i:{key:"i",fun:y,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:s(),des:"go to next page",cat:"Results"},o:{key:"o",fun:v(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:f(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:n,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:v(!0),des:"open the result in a new tab",cat:"Results"}},g={default:Object.assign({ArrowLeft:{key:"←",fun:a("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:a("down"),des:"select next search result",cat:"Results"}},p),vim:Object.assign({b:{key:"b",fun:c(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:c(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:c(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:c(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:u(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},v:{key:"v",fun:u(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:a("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:a("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:_,des:"copy url of the selected result to the clipboard",cat:"Results"}},p)},i=g[searxng.settings.hotkeys]||g.default;searxng.on(document,"keydown",e=>{if(Object.prototype.hasOwnProperty.call(i,e.key)&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){const d=e.target.tagName.toLowerCase();e.key==="Escape"?i[e.key].fun(e):(e.target===document.body||d==="a"||d==="button")&&(e.preventDefault(),i[e.key].fun())}});function a(e){return(d,k)=>{let w=document.querySelector(".result[data-vim-selected]"),E=e;if(w===null){if(w=document.querySelector(".result"),w===null)return;(e==="down"||e==="up")&&(E=w)}let b,S=document.querySelectorAll(".result");if(S=Array.from(S),typeof E!="string")b=E;else switch(E){case"visible":{const q=document.documentElement.scrollTop||document.body.scrollTop,x=q+document.documentElement.clientHeight;for(let I=0;I<S.length;I++){b=S[I];const C=b.offsetTop;if(C+b.clientHeight<=x&&C>q)break}break}case"down":b=S[S.indexOf(w)+1]||w;break;case"up":b=S[S.indexOf(w)-1]||w;break;case"bottom":b=S[S.length-1];break;case"top":default:b=S[0]}if(b){if(w.removeAttribute("data-vim-selected"),b.setAttribute("data-vim-selected","true"),!k){const q=b.querySelector("h3 a")||b.querySelector("a");q!==null&&q.focus()}d||h()}}}function n(){document.location.reload(!0)}function t(e){const d=e.target.tagName.toLowerCase();document.activeElement&&(d==="input"||d==="select"||d==="textarea")?document.activeElement.blur():searxng.closeDetail()}function o(e){return()=>{const d=document.querySelector(e);d&&d.click()}}function s(){return o('nav#pagination .next_page button[type="submit"]')}function f(){return o('nav#pagination .previous_page button[type="submit"]')}function h(){const e=document.querySelector(".result[data-vim-selected]");if(e===null)return;const d=document.documentElement.scrollTop||document.body.scrollTop,k=document.documentElement.clientHeight,w=e.offsetTop,E=w+e.clientHeight,b=120;if(e.previousElementSibling===null&&E<k){window.scroll(window.scrollX,0);return}d>w-b?window.scroll(window.scrollX,w-b):d+k<E+b&&window.scroll(window.scrollX,E-k+b)}function c(e){return()=>{window.scrollBy(0,e),a("visible")()}}function u(e,d){return()=>{window.scrollTo(0,e),a(d)()}}function y(){window.scrollTo(0,0);const e=document.querySelector("#q");if(e.focus(),e.setSelectionRange){const d=e.value.length;e.setSelectionRange(d,d)}}function v(e){return()=>{let d=document.querySelector(".result[data-vim-selected] h3 a");if(d===null&&(d=document.querySelector(".result[data-vim-selected] > a")),d!==null){const k=d.getAttribute("href");e?window.open(k):window.location.href=k}}}function A(e){const d={};for(const E in i){const b=i[E];d[b.cat]=d[b.cat]||[],d[b.cat].push(b)}const k=Object.keys(d).sort((E,b)=>d[b].length-d[E].length);if(k.length===0)return;let w='<a href="#" class="close" aria-label="close" title="close">×</a>';w+="<h3>How to navigate SearXNG with hotkeys</h3>",w+="<table>";for(let E=0;E<k.length;E++){const b=d[k[E]],S=E===k.length-1,q=E%2===0;q&&(w+="<tr>"),w+="<td>",w+=`<h4>${b[0].cat}</h4>`,w+='<ul class="list-unstyled">';for(const x in b)w+=`<li><kbd>${b[x].key}</kbd> ${b[x].des}</li>`;w+="</ul>",w+="</td>",(!q||S)&&(w+="</tr>")}w+="</table>",e.innerHTML=w}function T(){let e=document.querySelector("#vim-hotkeys-help");e==null?(e=document.createElement("div"),e.id="vim-hotkeys-help",e.className="dialog-modal",A(e),document.getElementsByTagName("body")[0].appendChild(e)):e.classList.toggle("invisible")}function _(){const e=document.querySelector(".result[data-vim-selected] h3 a");if(e===null)return;const d=e.getAttribute("href");navigator.clipboard.writeText(d)}searxng.scrollPageToSelected=h,searxng.selectNext=a("down"),searxng.selectPrevious=a("up")});((m,r,l)=>{l.ready(()=>{l.on(".searxng_init_map","click",function(p){this.classList.remove("searxng_init_map");const g=this.dataset.leafletTarget,i=parseFloat(this.dataset.mapLon),a=parseFloat(this.dataset.mapLat),n=parseFloat(this.dataset.mapZoom),t=JSON.parse(this.dataset.mapBoundingbox),o=JSON.parse(this.dataset.mapGeojson);l.loadStyle("css/leaflet.css"),l.loadScript("js/leaflet.js",()=>{let s=null;if(t){const _=L.latLng(t[0],t[2]),e=L.latLng(t[1],t[3]);s=L.latLngBounds(_,e)}const f=L.map(g),h="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",c='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',u=new L.TileLayer(h,{minZoom:1,maxZoom:19,attribution:c}),y="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",v='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',A=new L.TileLayer(y,{minZoom:1,maxZoom:19,attribution:v});s?setTimeout(()=>{f.fitBounds(s,{maxZoom:17})},0):i&&a&&(n?f.setView(new L.LatLng(a,i),n):f.setView(new L.LatLng(a,i),8)),f.addLayer(u);const T={"OSM Mapnik":u,"OSM Wikimedia":A};L.control.layers(T).addTo(f),o&&L.geoJson(o).addTo(f)}),p.preventDefault()})})})(window,document,window.searxng);((m,r,l)=>{l.endpoint==="preferences"&&l.ready(()=>{let p=null;function g(){p==null&&l.http("GET","engine_descriptions.json").then(s=>{p=JSON.parse(s);for(const[f,h]of Object.entries(p)){const c=r.querySelectorAll(`[data-engine-name="${f}"] .engine-description`);for(const u of c){const y=` (<i>${l.settings.translations.Source}:&nbsp;${h[1]}</i>)`;u.innerHTML=h[0]+y}}})}for(const s of r.querySelectorAll("[data-engine-name]"))l.on(s,"mouseenter",g);const i=r.querySelectorAll(".enable-all-engines"),a=r.querySelectorAll(".disable-all-engines"),n=r.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),t=s=>{for(const f of n)f.offsetParent!==null&&(f.checked=!s)};for(const s of i)l.on(s,"click",()=>t(!0));for(const s of a)l.on(s,"click",()=>t(!1));const o=r.querySelector("#copy-hash");l.on(o,"click",s=>{s.preventDefault(),navigator.clipboard.writeText(o.dataset.hash),o.innerText=o.dataset.copiedText})})})(window,document,window.searxng);/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */(function(m,r){typeof m.CustomEvent!="function"&&(m.CustomEvent=function(c,u){u=u||{bubbles:!1,cancelable:!1,detail:void 0};var y=r.createEvent("CustomEvent");return y.initCustomEvent(c,u.bubbles,u.cancelable,u.detail),y},m.CustomEvent.prototype=m.Event.prototype),r.addEventListener("touchstart",s,!1),r.addEventListener("touchmove",f,!1),r.addEventListener("touchend",o,!1);var l=null,p=null,g=null,i=null,a=null,n=null,t=0;function o(c){if(n===c.target){var u=parseInt(h(n,"data-swipe-threshold","20"),10),y=h(n,"data-swipe-unit","px"),v=parseInt(h(n,"data-swipe-timeout","500"),10),A=Date.now()-a,T="",_=c.changedTouches||c.touches||[];if(y==="vh"&&(u=Math.round(u/100*r.documentElement.clientHeight)),y==="vw"&&(u=Math.round(u/100*r.documentElement.clientWidth)),Math.abs(g)>Math.abs(i)?Math.abs(g)>u&&A<v&&(g>0?T="swiped-left":T="swiped-right"):Math.abs(i)>u&&A<v&&(i>0?T="swiped-up":T="swiped-down"),T!==""){var e={dir:T.replace(/swiped-/,""),touchType:(_[0]||{}).touchType||"direct",fingers:t,xStart:parseInt(l,10),xEnd:parseInt((_[0]||{}).clientX||-1,10),yStart:parseInt(p,10),yEnd:parseInt((_[0]||{}).clientY||-1,10)};n.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:e})),n.dispatchEvent(new CustomEvent(T,{bubbles:!0,cancelable:!0,detail:e}))}l=null,p=null,a=null}}function s(c){c.target.getAttribute("data-swipe-ignore")!=="true"&&(n=c.target,a=Date.now(),l=c.touches[0].clientX,p=c.touches[0].clientY,g=0,i=0,t=c.touches.length)}function f(c){if(!(!l||!p)){var u=c.touches[0].clientX,y=c.touches[0].clientY;g=l-u,i=p-y}}function h(c,u,y){for(;c&&c!==r.documentElement;){var v=c.getAttribute(u);if(v)return v;c=c.parentNode}return y}})(window,document);((m,r,l)=>{l.endpoint==="results"&&l.ready(()=>{r.querySelectorAll("#urls img").forEach(n=>n.addEventListener("error",()=>{n.src=`${window.searxng.settings.theme_static_path}/img/img_load_error.svg`},{once:!0})),r.querySelector("#search_url button#copy_url")&&(r.querySelector("#search_url button#copy_url").style.display="block"),l.on(".btn-collapse","click",function(){const n=this.getAttribute("data-btn-text-collapsed"),t=this.getAttribute("data-btn-text-not-collapsed"),o=this.getAttribute("data-target"),s=r.querySelector(o);let f=this.innerHTML;this.classList.contains("collapsed")?f=f.replace(n,t):f=f.replace(t,n),this.innerHTML=f,this.classList.toggle("collapsed"),s.classList.toggle("invisible")}),l.on(".media-loader","click",function(){const n=this.getAttribute("data-target"),t=r.querySelector(`${n} > iframe`),o=t.getAttribute("src");(o==null||o===!1)&&t.setAttribute("src",t.getAttribute("data-src"))}),l.on("#copy_url","click",function(){const n=this.parentElement.querySelector("pre");navigator.clipboard.writeText(n.innerText),this.innerText=this.dataset.copiedText});let p;const g=r.createElement("div");g.classList.add("loader");const i=new Image,a=(n,t)=>{p&&clearTimeout(p),p=setTimeout(()=>{i.src=n},1e3),i.onload=()=>{t(),g.remove()},i.onerror=()=>{g.remove()}};l.selectImage=n=>{if(r.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",l.scrollPageToSelected(),!n)return;const t=n.querySelector(".result-images-source img");if(!t)return;const o=t.getAttribute("data-src");if(!o)return;const s=n.querySelector(".image_thumbnail");t.src=s.src,n.querySelector(".detail").appendChild(g),a(o,()=>{t.src=o,t.removeAttribute("data-src")})},l.closeDetail=()=>{r.getElementById("results").classList.remove("image-detail-open"),window.location.hash==="#image-viewer"&&window.history.back(),l.scrollPageToSelected()},l.on(".result-detail-close","click",n=>{n.preventDefault(),l.closeDetail()}),l.on(".result-detail-previous","click",n=>{n.preventDefault(),l.selectPrevious(!1)}),l.on(".result-detail-next","click",n=>{n.preventDefault(),l.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!=="#image-viewer"&&l.closeDetail()}),r.querySelectorAll(".swipe-horizontal").forEach(n=>{n.addEventListener("swiped-left",()=>{l.selectNext(!1)}),n.addEventListener("swiped-right",()=>{l.selectPrevious(!1)})}),m.addEventListener("scroll",()=>{const n=r.getElementById("backToTop"),t=document.documentElement.scrollTop||document.body.scrollTop,o=r.getElementById("results");n!==null&&(t>=100?o.classList.add("scrolling"):o.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);(function(m,r,l){var p="q",g;function i(){if(g.value.length>0){var t=document.getElementById("search");setTimeout(t.submit.bind(t),0)}}function a(t){var o=document.getElementById("clear_search"),s=function(){t.value.length===0?o.classList.add("empty"):o.classList.remove("empty")};s(),o.addEventListener("click",function(f){t.value="",t.focus(),s(),f.preventDefault()}),t.addEventListener("keydown",s,!1)}const n=async t=>{let o;if(l.settings.method==="GET"){const s=new URLSearchParams;s.append("q",t),o=fetch("./autocompleter?"+s.toString())}else{const s=new FormData;s.append("q",t),o=fetch("./autocompleter",{method:"POST",body:s})}o.then(async function(s){const f=await s.json();if(!f)return;const h=r.querySelector(".autocomplete"),c=r.querySelector(".autocomplete ul");if(h.classList.add("open"),c.innerHTML="",!f[1]||f[1].length==0){const u=document.createElement("li");u.classList.add("no-item-found"),u.innerHTML=l.settings.translations.no_item_found,c.appendChild(u);return}for(let u of f[1]){const y=document.createElement("li");y.innerText=u,l.on(y,"mousedown",()=>{g.value=u,r.querySelector("#search").submit(),h.classList.remove("open")}),c.appendChild(y)}})};l.ready(function(){window.location.pathname==="/"&&window.matchMedia("(min-width: 50em)").matches&&document.getElementById("q").focus(),g=r.getElementById(p);const t=r.querySelector(".autocomplete"),o=r.querySelector(".autocomplete ul");g!==null&&(a(g),l.settings.autocomplete&&(l.on(g,"input",()=>{const h=g.value;h.length<l.settings.autocomplete_min||n(h)}),l.on(g,"keyup",h=>{let c=-1;const u=o.children;for(let v=0;v<u.length;v++)if(u[v].classList.contains("active")){c=v;break}let y=-1;if(h.key==="ArrowUp"?(c>=0&&u[c].classList.remove("active"),y=(c-1+u.length)%u.length):h.key==="ArrowDown"?(c>=0&&u[c].classList.remove("active"),y=(c+1)%u.length):(h.key==="Tab"||h.key==="Enter")&&t.classList.remove("open"),y!=-1){const v=u[y];v.classList.add("active"),v.classList.contains("no-item-found")||(g.value=v.innerText)}}))),g!==null&&l.settings.search_on_category_select&&r.querySelector(".search_filters")!=null&&(l.on(r.getElementById("safesearch"),"change",i),l.on(r.getElementById("time_range"),"change",i),l.on(r.getElementById("language"),"change",i));const s=r.querySelectorAll("button.category_button");for(let h of s)l.on(h,"click",c=>{if(c.shiftKey){c.preventDefault(),h.classList.toggle("selected");return}const u=r.querySelectorAll("button.category_button.selected");for(let y of u)y.classList.remove("selected");h.classList.add("selected")});const f=r.querySelector("#search");f!=null&&l.on(f,"submit",h=>{h.preventDefault();const c=r.querySelector("#selected-categories");if(c){let u=[];for(let y of s)y.classList.contains("selected")&&u.push(y.name.replace("category_",""));c.value=u.join(",")}f.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
