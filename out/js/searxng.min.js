/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=function(m,s){m.Element&&function(r){r.matches=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.msMatchesSelector||function(l){for(var o=this,t=(o.parentNode||o.document).querySelectorAll(l),n=-1;t[++n]&&t[n]!=o;);return!!t[n]}}(Element.prototype);function a(r,l,o){try{r.call(l,o)}catch(t){console.log(t)}}var f=window.searxng||{};f.on=function(r,l,o,t){t=t||!1,typeof r!="string"?r.addEventListener(l,o,t):s.addEventListener(l,function(n){for(var i=n.target||n.srcElement,p=!1;i&&i.matches&&i!==s&&!(p=i.matches(r));)i=i.parentElement;p&&a(o,i,n)},t)},f.ready=function(r){document.readyState!="loading"?r.call(m):m.addEventListener("DOMContentLoaded",r.bind(m))},f.http=function(r,l,o=null){return new Promise(function(t,n){try{var i=new XMLHttpRequest;i.open(r,l,!0),i.timeout=2e4,i.onload=function(){i.status==200?t(i.response,i.responseType):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.onabort=function(){n(Error("Transaction is aborted"))},i.ontimeout=function(){n(Error("Timeout"))},o?i.send(o):i.send()}catch(p){n(p)}})},f.loadStyle=function(r){var l=f.settings.theme_static_path+"/"+r,o="style_"+r.replace(".","_"),t=s.getElementById(o);t===null&&(t=s.createElement("link"),t.setAttribute("id",o),t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",l),s.body.appendChild(t))},f.loadScript=function(r,l){var o=f.settings.theme_static_path+"/"+r,t="script_"+r.replace(".","_"),n=s.getElementById(t);if(n===null)n=s.createElement("script"),n.setAttribute("id",t),n.setAttribute("src",o),n.onload=l,n.onerror=function(){n.setAttribute("error","1")},s.body.appendChild(n);else if(n.hasAttribute("error"))console.log("callback not executed : script '"+o+"' not loaded.");else try{l.apply(n,[])}catch(i){console.log(i)}},f.insertBefore=function(r,l){l.parentNode.insertBefore(r,l)},f.insertAfter=function(r,l){l.parentNode.insertAfter(r,l.nextSibling)},f.on(".close","click",function(){this.parentNode.classList.add("invisible")});function g(){for(var r of s.getElementsByTagName("body")[0].classList.values())if(r.endsWith("_endpoint"))return r.split("_")[0];return""}return f.endpoint=g(),f}(window,document);searxng.ready(function(){if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}let m=document;var s=m.getElementById("results").classList.contains("only_template_images");function a(){var r=m.createElement("div");return r.classList.add("loader"),r}function f(r,l){r.textContent="",l.forEach(o=>r.appendChild(o))}function g(r){var l=m.querySelector("#pagination form.next_page");if(l){f(m.querySelector("#pagination"),[a()]);var o=new FormData(l);searxng.http("POST",m.querySelector("#search").getAttribute("action"),o).then(function(t){var n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelectorAll("#urls article"),p=n.querySelector("#pagination");m.querySelector("#pagination").remove(),i.length>0&&!s&&m.querySelector("#urls").appendChild(m.createElement("hr")),i.forEach(h=>{m.querySelector("#urls").appendChild(h)}),p&&(m.querySelector("#results").appendChild(p),r())}).catch(function(t){console.log(t);var n=m.createElement("div");n.textContent=searxng.settings.translations.error_loading_next_page,n.classList.add("dialog-error"),n.setAttribute("role","alert"),f(m.querySelector("#pagination"),[n])})}}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const r={rootMargin:"20rem"},l="article.result:last-child",o=new IntersectionObserver(t=>{const n=t[0];n.isIntersecting&&(o.unobserve(n.target),g(()=>o.observe(m.querySelector(l),r)))});o.observe(m.querySelector(l),r)}});searxng.ready(function(){function m(e){for(;e!==void 0;){if(e.classList.contains("detail"))return!0;if(e.classList.contains("result"))return!1;e=e.parentNode}return!1}function s(e){for(;e!==void 0;){if(e.classList.contains("result"))return e;e=e.parentNode}}function a(e){return e&&e.classList.contains("result-images")}searxng.on(".result","click",function(e){if(!m(e.target)){l(this)(!0,!0);let u=s(e.target);a(u)&&(e.preventDefault(),searxng.selectImage(u))}}),searxng.on(".result a","focus",function(e){if(!m(e.target)){let u=s(e.target);u&&u.getAttribute("data-vim-selected")===null&&l(u)(!0),a(u)&&searxng.selectImage(u)}},!0);var f={Escape:{key:"ESC",fun:t,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:_,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:k,des:"toggle help window",cat:"Other"},i:{key:"i",fun:y,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:i(),des:"go to next page",cat:"Results"},o:{key:"o",fun:b(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:p(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:o,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:b(!0),des:"open the result in a new tab",cat:"Results"}},g={default:Object.assign({ArrowLeft:{key:"←",fun:l("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:l("down"),des:"select next search result",cat:"Results"}},f),vim:Object.assign({b:{key:"b",fun:c(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:c(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:c(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:c(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:d(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},v:{key:"v",fun:d(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:l("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:l("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:_,des:"copy url of the selected result to the clipboard",cat:"Results"}},f)},r=g[searxng.settings.hotkeys]||g.default;searxng.on(document,"keydown",function(e){if(Object.prototype.hasOwnProperty.call(r,e.key)&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){var u=e.target.tagName.toLowerCase();e.key==="Escape"?r[e.key].fun(e):(e.target===document.body||u==="a"||u==="button")&&(e.preventDefault(),r[e.key].fun())}});function l(e){return function(u,T){var E=document.querySelector(".result[data-vim-selected]"),S=e;if(E===null){if(E=document.querySelector(".result"),E===null)return;(e==="down"||e==="up")&&(S=E)}var v,w=document.querySelectorAll(".result");if(w=Array.from(w),typeof S!="string")v=S;else switch(S){case"visible":for(var A=document.documentElement.scrollTop||document.body.scrollTop,B=A+document.documentElement.clientHeight,x=0;x<w.length;x++){v=w[x];var I=v.offsetTop,D=I+v.clientHeight;if(D<=B&&I>A)break}break;case"down":v=w[w.indexOf(E)+1]||E;break;case"up":v=w[w.indexOf(E)-1]||E;break;case"bottom":v=w[w.length-1];break;case"top":default:v=w[0]}if(v){if(E.removeAttribute("data-vim-selected"),v.setAttribute("data-vim-selected","true"),!T){var C=v.querySelector("h3 a")||v.querySelector("a");C!==null&&C.focus()}u||h()}}}function o(){document.location.reload(!0)}function t(e){const u=e.target.tagName.toLowerCase();document.activeElement&&(u==="input"||u==="select"||u==="textarea")?document.activeElement.blur():searxng.closeDetail()}function n(e){return function(){var u=document.querySelector(e);u&&u.click()}}function i(){return n('nav#pagination .next_page button[type="submit"]')}function p(){return n('nav#pagination .previous_page button[type="submit"]')}function h(){var e=document.querySelector(".result[data-vim-selected]");if(e!==null){var u=document.documentElement.scrollTop||document.body.scrollTop,T=document.documentElement.clientHeight,E=e.offsetTop,S=E+e.clientHeight,v=120;if(e.previousElementSibling===null&&S<T){window.scroll(window.scrollX,0);return}if(u>E-v)window.scroll(window.scrollX,E-v);else{var w=u+T;w<S+v&&window.scroll(window.scrollX,S-T+v)}}}function c(e){return function(){window.scrollBy(0,e),l("visible")()}}function d(e,u){return function(){window.scrollTo(0,e),l(u)()}}function y(){window.scrollTo(0,0);var e=document.querySelector("#q");if(e.focus(),e.setSelectionRange){var u=e.value.length;e.setSelectionRange(u,u)}}function b(e){return function(){var u=document.querySelector(".result[data-vim-selected] h3 a");if(u===null&&(u=document.querySelector(".result[data-vim-selected] > a")),u!==null){var T=u.getAttribute("href");e?window.open(T):window.location.href=T}}}function q(e){var u={};for(var T in r){var E=r[T];u[E.cat]=u[E.cat]||[],u[E.cat].push(E)}var S=Object.keys(u).sort(function(D,C){return u[C].length-u[D].length});if(S.length!==0){var v='<a href="#" class="close" aria-label="close" title="close">×</a>';v+="<h3>How to navigate SearXNG with hotkeys</h3>",v+="<table>";for(var w=0;w<S.length;w++){var A=u[S[w]],B=w===S.length-1,x=w%2===0;x&&(v+="<tr>"),v+="<td>",v+="<h4>"+A[0].cat+"</h4>",v+='<ul class="list-unstyled">';for(var I in A)v+="<li><kbd>"+A[I].key+"</kbd> "+A[I].des+"</li>";v+="</ul>",v+="</td>",(!x||B)&&(v+="</tr>")}v+="</table>",e.innerHTML=v}}function k(){var e=document.querySelector("#vim-hotkeys-help");if(e==null){e=document.createElement("div"),e.id="vim-hotkeys-help",e.className="dialog-modal",q(e);var u=document.getElementsByTagName("body")[0];u.appendChild(e)}else{e.classList.toggle("invisible");return}}function _(){var e=document.querySelector(".result[data-vim-selected] h3 a");if(e===null)return;const u=e.getAttribute("href");navigator.clipboard.writeText(u)}searxng.scrollPageToSelected=h,searxng.selectNext=l("down"),searxng.selectPrevious=l("up")});(function(m,s,a){a.ready(function(){a.on(".searxng_init_map","click",function(f){this.classList.remove("searxng_init_map");var g=this.dataset.leafletTarget,r=parseFloat(this.dataset.mapLon),l=parseFloat(this.dataset.mapLat),o=parseFloat(this.dataset.mapZoom),t=JSON.parse(this.dataset.mapBoundingbox),n=JSON.parse(this.dataset.mapGeojson);a.loadStyle("css/leaflet.css"),a.loadScript("js/leaflet.js",function(){var i=null;if(t){var p=L.latLng(t[0],t[2]),h=L.latLng(t[1],t[3]);i=L.latLngBounds(p,h)}var c=L.map(g),d="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",y='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',b=new L.TileLayer(d,{minZoom:1,maxZoom:19,attribution:y}),q="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",k='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',_=new L.TileLayer(q,{minZoom:1,maxZoom:19,attribution:k});i?setTimeout(function(){c.fitBounds(i,{maxZoom:17})},0):r&&l&&(o?c.setView(new L.latLng(l,r),o):c.setView(new L.latLng(l,r),8)),c.addLayer(b);var e={"OSM Mapnik":b,"OSM Wikimedia":_};L.control.layers(e).addTo(c),n&&L.geoJson(n).addTo(c)}),f.preventDefault()})})})(window,document,window.searxng);(function(m,s,a){a.endpoint==="preferences"&&a.ready(function(){let f=null;function g(){f==null&&a.http("GET","engine_descriptions.json").then(function(i){f=JSON.parse(i);for(const[p,h]of Object.entries(f)){let c=s.querySelectorAll('[data-engine-name="'+p+'"] .engine-description');for(const d of c){let y=" (<i>"+a.settings.translations.Source+":&nbsp;"+h[1]+"</i>)";d.innerHTML=h[0]+y}}})}for(const i of s.querySelectorAll("[data-engine-name]"))a.on(i,"mouseenter",g);const r=s.querySelectorAll(".enable-all-engines"),l=s.querySelectorAll(".disable-all-engines"),o=s.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),t=i=>{for(const p of o)p.offsetParent!==null&&(p.checked=!i)};for(const i of r)a.on(i,"click",()=>t(!0));for(const i of l)a.on(i,"click",()=>t(!1));const n=s.querySelector("#copy-hash");a.on(n,"click",i=>{i.preventDefault(),navigator.clipboard.writeText(n.dataset.hash),n.innerText=n.dataset.copiedText})})})(window,document,window.searxng);/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */(function(m,s){typeof m.CustomEvent!="function"&&(m.CustomEvent=function(c,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var y=s.createEvent("CustomEvent");return y.initCustomEvent(c,d.bubbles,d.cancelable,d.detail),y},m.CustomEvent.prototype=m.Event.prototype),s.addEventListener("touchstart",i,!1),s.addEventListener("touchmove",p,!1),s.addEventListener("touchend",n,!1);var a=null,f=null,g=null,r=null,l=null,o=null,t=0;function n(c){if(o===c.target){var d=parseInt(h(o,"data-swipe-threshold","20"),10),y=h(o,"data-swipe-unit","px"),b=parseInt(h(o,"data-swipe-timeout","500"),10),q=Date.now()-l,k="",_=c.changedTouches||c.touches||[];if(y==="vh"&&(d=Math.round(d/100*s.documentElement.clientHeight)),y==="vw"&&(d=Math.round(d/100*s.documentElement.clientWidth)),Math.abs(g)>Math.abs(r)?Math.abs(g)>d&&q<b&&(g>0?k="swiped-left":k="swiped-right"):Math.abs(r)>d&&q<b&&(r>0?k="swiped-up":k="swiped-down"),k!==""){var e={dir:k.replace(/swiped-/,""),touchType:(_[0]||{}).touchType||"direct",fingers:t,xStart:parseInt(a,10),xEnd:parseInt((_[0]||{}).clientX||-1,10),yStart:parseInt(f,10),yEnd:parseInt((_[0]||{}).clientY||-1,10)};o.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:e})),o.dispatchEvent(new CustomEvent(k,{bubbles:!0,cancelable:!0,detail:e}))}a=null,f=null,l=null}}function i(c){c.target.getAttribute("data-swipe-ignore")!=="true"&&(o=c.target,l=Date.now(),a=c.touches[0].clientX,f=c.touches[0].clientY,g=0,r=0,t=c.touches.length)}function p(c){if(!(!a||!f)){var d=c.touches[0].clientX,y=c.touches[0].clientY;g=a-d,r=f-y}}function h(c,d,y){for(;c&&c!==s.documentElement;){var b=c.getAttribute(d);if(b)return b;c=c.parentNode}return y}})(window,document);(function(m,s,a){a.endpoint==="results"&&a.ready(function(){s.querySelectorAll("#urls img").forEach(o=>o.addEventListener("error",()=>{o.src=window.searxng.settings.theme_static_path+"/img/img_load_error.svg"},{once:!0})),s.querySelector("#search_url button#copy_url")&&(s.querySelector("#search_url button#copy_url").style.display="block"),a.on(".btn-collapse","click",function(){var o=this.getAttribute("data-btn-text-collapsed"),t=this.getAttribute("data-btn-text-not-collapsed"),n=this.getAttribute("data-target"),i=s.querySelector(n),p=this.innerHTML;this.classList.contains("collapsed")?p=p.replace(o,t):p=p.replace(t,o),this.innerHTML=p,this.classList.toggle("collapsed"),i.classList.toggle("invisible")}),a.on(".media-loader","click",function(){var o=this.getAttribute("data-target"),t=s.querySelector(o+" > iframe"),n=t.getAttribute("src");(n==null||n===!1)&&t.setAttribute("src",t.getAttribute("data-src"))}),a.on("#copy_url","click",function(){var o=this.parentElement.querySelector("pre");navigator.clipboard.writeText(o.innerText),this.innerText=this.dataset.copiedText});let f;const g=s.createElement("div");g.classList.add("loader");const r=new Image,l=(o,t)=>{f&&clearTimeout(f),f=setTimeout(()=>{r.src=o},1e3),r.onload=()=>{t(),g.remove()},r.onerror=()=>{g.remove()}};a.selectImage=o=>{if(s.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",a.scrollPageToSelected(),!o)return;const t=o.querySelector(".result-images-source img");if(!t)return;const n=t.getAttribute("data-src");if(!n)return;const i=o.querySelector(".image_thumbnail");t.src=i.src,o.querySelector(".detail").appendChild(g),l(n,()=>{t.src=n,t.removeAttribute("data-src")})},a.closeDetail=function(){s.getElementById("results").classList.remove("image-detail-open"),window.location.hash=="#image-viewer"&&window.history.back(),a.scrollPageToSelected()},a.on(".result-detail-close","click",o=>{o.preventDefault(),a.closeDetail()}),a.on(".result-detail-previous","click",o=>{o.preventDefault(),a.selectPrevious(!1)}),a.on(".result-detail-next","click",o=>{o.preventDefault(),a.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!="#image-viewer"&&a.closeDetail()}),s.querySelectorAll(".swipe-horizontal").forEach(o=>{o.addEventListener("swiped-left",function(){a.selectNext(!1)}),o.addEventListener("swiped-right",function(){a.selectPrevious(!1)})}),m.addEventListener("scroll",function(){var o=s.getElementById("backToTop"),t=document.documentElement.scrollTop||document.body.scrollTop,n=s.getElementById("results");o!==null&&(t>=100?n.classList.add("scrolling"):n.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);(function(m,s,a){var f="q",g;function r(){if(g.value.length>0){var t=document.getElementById("search");setTimeout(t.submit.bind(t),0)}}function l(t){var n=document.getElementById("clear_search"),i=function(){t.value.length===0?n.classList.add("empty"):n.classList.remove("empty")};i(),n.addEventListener("click",function(p){t.value="",t.focus(),i(),p.preventDefault()}),t.addEventListener("keydown",i,!1)}const o=async t=>{let n;if(a.settings.method==="GET"){const i=new URLSearchParams;i.append("q",t),n=fetch("./autocompleter?"+i.toString())}else{const i=new FormData;i.append("q",t),n=fetch("./autocompleter",{method:"POST",body:i})}n.then(async function(i){const p=await i.json();if(!p)return;const h=s.querySelector(".autocomplete"),c=s.querySelector(".autocomplete ul");if(h.classList.add("open"),c.innerHTML="",!p[1]||p[1].length==0){const d=document.createElement("li");d.classList.add("no-item-found"),d.innerHTML=a.settings.translations.no_item_found,c.appendChild(d);return}for(let d of p[1]){const y=document.createElement("li");y.innerText=d,a.on(y,"mousedown",()=>{g.value=d,s.querySelector("#search").submit(),h.classList.remove("open")}),c.appendChild(y)}})};a.ready(function(){window.location.pathname==="/"&&window.matchMedia("(min-width: 50em)").matches&&document.getElementById("q").focus(),g=s.getElementById(f);const t=s.querySelector(".autocomplete"),n=s.querySelector(".autocomplete ul");g!==null&&(l(g),a.settings.autocomplete&&(a.on(g,"input",()=>{const h=g.value;h.length<a.settings.autocomplete_min||o(h)}),a.on(g,"keyup",h=>{let c=-1;const d=n.children;for(let b=0;b<d.length;b++)if(d[b].classList.contains("active")){c=b;break}let y=-1;if(h.key==="ArrowUp"?(c>=0&&d[c].classList.remove("active"),y=(c-1+d.length)%d.length):h.key==="ArrowDown"?(c>=0&&d[c].classList.remove("active"),y=(c+1)%d.length):(h.key==="Tab"||h.key==="Enter")&&t.classList.remove("open"),y!=-1){const b=d[y];b.classList.add("active"),b.classList.contains("no-item-found")||(g.value=b.innerText)}}))),g!==null&&a.settings.search_on_category_select&&s.querySelector(".search_filters")!=null&&(a.on(s.getElementById("safesearch"),"change",r),a.on(s.getElementById("time_range"),"change",r),a.on(s.getElementById("language"),"change",r));const i=s.querySelectorAll("button.category_button");for(let h of i)a.on(h,"click",c=>{if(c.shiftKey){c.preventDefault(),h.classList.toggle("selected");return}const d=s.querySelectorAll("button.category_button.selected");for(let y of d)y.classList.remove("selected");h.classList.add("selected")});const p=s.querySelector("#search");p!=null&&a.on(p,"submit",h=>{h.preventDefault();const c=s.querySelector("#selected-categories");if(c){let d=[];for(let y of i)y.classList.contains("selected")&&d.push(y.name.replace("category_",""));c.value=d.join(",")}p.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
