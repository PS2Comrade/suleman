import{d as e,e as t,g as n}from"./searxng.core.min.js";let r=0,i=0;const a=async(r,a,o)=>{try{let s;s=n.method===`GET`?await e(`GET`,`./autocompleter?q=${encodeURIComponent(a)}`):await e(`POST`,`./autocompleter`,{body:new URLSearchParams({q:a})});let c=await s.json();if(o<=i)return;let l=document.querySelector(`.autocomplete`);if(!l)return;let u=document.querySelector(`.autocomplete ul`);if(!u)return;if(l.classList.add(`open`),u.replaceChildren(),c?.[1]?.length===0){let e=Object.assign(document.createElement(`li`),{className:`no-item-found`,textContent:n.translations?.no_item_found??`No results found`});u.append(e),i=o;return}let d=new DocumentFragment;for(let e of c[1]??[]){let n=Object.assign(document.createElement(`li`),{textContent:e});t(`mousedown`,n,()=>{r.value=e;let t=document.querySelector(`#search`);t?.submit(),l.classList.remove(`open`)}),d.append(n)}u.append(d),i=o}catch(e){console.error(`Error fetching autocomplete results:`,e)}},o=document.getElementById(`q`);let s;o&&t(`input`,o,()=>{clearTimeout(s);let e=o.value,t=n.autocomplete_min??2;e.length<t||(s=window.setTimeout(async()=>{if(e===o.value){let t=++r;await a(o,e,t)}},0))});const c=document.querySelector(`.autocomplete`),l=document.querySelector(`.autocomplete ul`);l&&o&&t(`keyup`,o,e=>{let t=[...l.children],n=t.findIndex(e=>e.classList.contains(`active`)),r=-1;switch(e.key){case`ArrowUp`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n-1+t.length)%t.length;break}case`ArrowDown`:{let e=t[n];e&&n>=0&&e.classList.remove(`active`),r=(n+1)%t.length;break}case`Tab`:case`Enter`:c&&c.classList.remove(`open`);break;default:break}if(r!==-1){let e=t[r];if(e&&(e.classList.add(`active`),!e.classList.contains(`no-item-found`))){let t=document.getElementById(`q`);t&&(t.value=e.textContent??``)}}});
//# sourceMappingURL=autocomplete.min.js.map